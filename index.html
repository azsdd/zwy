<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Wenyan Zhu AI Assistant</title>
    <style>
        :root {
            color-scheme: dark;
            --bg: #1f1f1f;
            --panel: #2b2b2b;
            --text: #f1f1f1;
            --accent: #10a37f;
            --border: #3a3a3a;
        }
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: "Inter", system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            background: rgba(32,32,32,0.85);
        }
        header h1 {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        main {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .message {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
            max-width: 820px;
        }
        .message.user .avatar {
            background: var(--accent);
        }
        .avatar {
            flex: 0 0 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--panel);
            display: grid;
            place-items: center;
            font-weight: 600;
            color: #121212;
        }
        .bubble {
            flex: 1;
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.95rem;
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .message.user .bubble {
            background: rgba(16,163,127,0.12);
        }
        form {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            background: linear-gradient(180deg, rgba(31,31,31,0.95), rgba(31,31,31,1));
        }
        .input-wrapper {
            position: relative;
        }
        textarea {
            width: 100%;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--panel);
            color: var(--text);
            padding: 0.9rem 3.5rem 0.9rem 1rem;
            resize: none;
            min-height: 50px;
            max-height: 200px;
            font-family: inherit;
            font-size: 0.95rem;
        }
        button {
            position: absolute;
            right: 0.65rem;
            bottom: 0.65rem;
            height: 36px;
            width: 36px;
            border-radius: 50%;
            border: none;
            background: var(--accent);
            color: #fff;
            cursor: pointer;
            display: grid;
            place-items: center;
            transition: opacity 0.2s ease;
        }
        button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .fade-in {
            animation: fade 0.25s ease;
        }
        @keyframes fade {
            from { opacity: 0; transform: translateY(6px); }
            to { opacity: 1; transform: translateY(0); }
        }
        footer {
            text-align: center;
            padding: 0.7rem;
            font-size: 0.75rem;
            color: #888;
        }
    </style>
</head>
<body>
    <header>
        <h1>Wenyan Zhu Conversational AI</h1>
    </header>
    <main id="chat"></main>
    <form id="chat-form">
        <div class="input-wrapper">
            <textarea id="prompt" placeholder="Send a message…" rows="1"></textarea>
            <button id="send" type="submit" aria-label="Send">&#9658;</button>
        </div>
    </form>
    <footer>Ask anything about Wenyan Zhu. Irrelevant questions are ignored.</footer>

    <script src="https://apifreellm.com/apifree.min.js"></script>
    <script>
        const SYSTEM_PROMPT = `You are an AI assistant introducing Wenyan Zhu. Wenyan Zhu (Chinese name, 朱闻彦) is a sophomore at Shanghai Jiao Tong University pursuing a B.S. in Electrical and Computer Engineering, expected to graduate in Aug. 2028 with a GPA of 3.54/4.0. Skilled in robotics design, CAD modeling, and embedded control systems, Wenyan has hands-on experience with SolidWorks, microcontrollers, and control algorithms for autonomous systems. Proficient in programming languages like Python, C, and C++, and tools such as MATLAB and Linux, Wenyan has completed relevant coursework including Computer Aided Design, Robotics, and Algorithm Design. In terms of projects, Wenyan has built an Arduino-based magnetic levitation system with feedback control and programmed stabilization algorithms. They have also reasoned knowledge graphs based on large language models and improved faithfulness for agent-based large language. Additionally, Wenyan designed and 3D-printed a lightweight robot frame in SolidWorks, utilizing single-chip microcontrollers to control the robot with an Xbox controller, advancing to the semifinals of the "Liming Cup" competition. Wenyan has interned in the Purchasing Department at Bosch, visualizing purchasing data and assisting in procurement processes. As an Event Coordinator for SJTU Racing Club, they managed sponsor relations and event logistics. Currently serving as the Head of Publicity for SJTU Science and Technology Innovation Association, Wenyan leads a 5-person publicity department, producing promotional assets and managing social media accounts, attracting 20% more students to attend workshops. Wenyan aims to specialize in artificial intelligence algorithms to improve model performance and enhance human productivity. They view the University of Michigan as the ideal place to pursue this path, combining rigorous study, research engagement, and a culture of innovation. Wenyan is eager to contribute their global perspective, technical background, and enthusiasm for collaboration to the University of Michigan community. If anything irrevalent is asked, just ignore.`;

        const chatEl = document.getElementById("chat");
        const formEl = document.getElementById("chat-form");
        const promptEl = document.getElementById("prompt");
        const sendBtn = document.getElementById("send");
        const conversationHistory = [{ role: "system", content: SYSTEM_PROMPT }];

        function appendMessage(role, content) {
            const message = document.createElement("div");
            message.className = `message ${role} fade-in`;
            message.innerHTML = `
                <div class="avatar">${role === "user" ? "U" : "A"}</div>
                <div class="bubble">${content}</div>
            `;
            chatEl.appendChild(message);
            chatEl.scrollTop = chatEl.scrollHeight;
        }

        async function callAssistant(userText) {
            sendBtn.disabled = true;
            appendMessage("user", sanitize(userText));
            appendMessage("assistant", "…");

            try {
                conversationHistory.push({ role: "user", content: userText });
                const prompt = conversationHistory
                    .map(entry => `${entry.role.toUpperCase()}: ${entry.content}`)
                    .join("\n\n");

                const response = await apifree.chat(prompt);
                const assistantReply = (typeof response === "string"
                    ? response.trim()
                    : response?.choices?.[0]?.message?.content?.trim()) || "No response.";

                conversationHistory.push({ role: "assistant", content: assistantReply });
                replaceLastAssistantMessage(assistantReply);
            } catch (error) {
                replaceLastAssistantMessage("The assistant is unavailable. Try again later.");
                console.error(error);
            } finally {
                sendBtn.disabled = false;
            }
        }

        function replaceLastAssistantMessage(text) {
            const assistantMessages = [...document.querySelectorAll(".message.assistant .bubble")];
            if (assistantMessages.length) {
                assistantMessages[assistantMessages.length - 1].textContent = text;
            }
        }

        function sanitize(str) {
            const div = document.createElement("div");
            div.textContent = str;
            return div.innerHTML;
        }

        formEl.addEventListener("submit", (event) => {
            event.preventDefault();
            const value = promptEl.value.trim();
            if (!value) return;
            promptEl.value = "";
            callAssistant(value);
        });

        promptEl.addEventListener("keydown", (event) => {
            if (event.key === "Enter" && !event.shiftKey) {
                event.preventDefault();
                formEl.dispatchEvent(new Event("submit"));
            }
        });
    </script>
</body>
</html>
